// Pharaoh's Pyramid - OpenSCAD
// Units: meters (SI). Stone cube side = 0.500 m.
// Pyramid maximised under 600000 stones.
// Base: 121 x 121 stones; Layers: 121; Stones used: 597861; Leftover: 2139.
// Height = 121 * 0.5 = 60.500 m.
// Volume (stones only) = 597861 * (0.5^3) = 74732.625 m^3

s = 0.500;                // stone side length (m)
base_stones = 121;       // stones per side on base layer
layers = base_stones;    // number of layers
used_stones = 597861;    // computed used stones
pyramid_height = layers * s; // total height in meters

// Each layer is represented as a single rectangular block of exact dimensions
// equal to an integral number of stones: preserves every step precisely to 1 mm.

module layer(side_count, level)
{
    side_m = side_count * s;                 // side length in meters
    // Place layer so that pyramid is centered on X/Y origin, base sits at Z=0
    translate([ -side_m/2, -side_m/2, level * s ])
        cube([ side_m, side_m, s ], center = false);
}

// Build the stepped pyramid: outer face aligned with axes, +Y is north.
// Pyramid is centered above the tomb at the origin (0,0).
union()
{
    for (k = [0 : layers - 1])
        layer(base_stones - k, k);
}