```openscad
// Pyramid for Pharaoh - 20,000 stones of 50cm cube
// North is +Y axis
// Each stone needs all 4 corners centered on stones below

$fn = 20;

stone_size = 500; // 50cm in mm
total_stones = 20000;

// Calculate pyramid dimensions
// For a pyramid where each stone's corners sit on centers of 4 stones below,
// the offset between layers is stone_size/2 in both X and Y
// Layer n has side length: base_side - n * stone_size
// Stones per layer n: ((base_side - n * stone_size) / stone_size)^2

// Finding largest pyramid: solve for base dimension
// Sum of n^2 from k=1 to h where n = base_stones - (k-1)
// base^2 + (base-1)^2 + (base-2)^2 + ... + 1^2 = 20000
// This is sum of squares formula
// Testing: base=33: 33*34*67/6 = 12529
// base=34: 34*35*69/6 = 13735
// base=35: 35*36*71/6 = 14910
// base=36: 36*37*73/6 = 16206
// base=37: 37*38*75/6 = 17575
// base=38: 38*39*77/6 = 19019
// base=39: 39*40*79/6 = 20540 (too many)

base_stones = 38;
height_layers = 38;

module pyramid_core() {
    for (layer = [0 : height_layers - 1]) {
        stones_per_side = base_stones - layer;
        z_pos = layer * stone_size;
        offset = layer * stone_size / 2;
        
        for (x = [0 : stones_per_side - 1]) {
            for (y = [0 : stones_per_side - 1]) {
                translate([
                    -base_stones * stone_size / 2 + offset + x * stone_size + stone_size / 2,
                    -base_stones * stone_size / 2 + offset + y * stone_size + stone_size / 2,
                    z_pos + stone_size / 2
                ])
                cube([stone_size, stone_size, stone_size], center = true);
            }
        }
    }
}

module smooth_pyramid() {
    pyramid_height = height_layers * stone_size;
    base_width = base_stones * stone_size;
    top_width = stone_size;
    
    hull() {
        translate([0, 0, 0])
        cube([base_width, base_width, 1], center = true);
        
        translate([0, 0, pyramid_height])
        cube([top_width, top_width, 1], center = true);
    }
}

difference() {
    smooth_pyramid();
    
    // Subtract small amount from core to create shell
    scale([0.9999, 0.9999, 0.9999])
    smooth_pyramid();
}

```